{"version":3,"file":"@vercel_speed-insights_react.js","names":[],"sources":["../../@vercel/speed-insights/dist/react/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/react/index.tsx\nimport { useEffect, useRef } from \"react\";\n\n// package.json\nvar name = \"@vercel/speed-insights\";\nvar version = \"1.3.1\";\n\n// src/queue.ts\nvar initQueue = () => {\n  if (window.si) return;\n  window.si = function a(...params) {\n    (window.siq = window.siq || []).push(params);\n  };\n};\n\n// src/utils.ts\nfunction isBrowser() {\n  return typeof window !== \"undefined\";\n}\nfunction detectEnvironment() {\n  try {\n    const env = process.env.NODE_ENV;\n    if (env === \"development\" || env === \"test\") {\n      return \"development\";\n    }\n  } catch (e) {\n  }\n  return \"production\";\n}\nfunction isDevelopment() {\n  return detectEnvironment() === \"development\";\n}\nfunction computeRoute(pathname, pathParams) {\n  if (!pathname || !pathParams) {\n    return pathname;\n  }\n  let result = pathname;\n  try {\n    const entries = Object.entries(pathParams);\n    for (const [key, value] of entries) {\n      if (!Array.isArray(value)) {\n        const matcher = turnValueToRegExp(value);\n        if (matcher.test(result)) {\n          result = result.replace(matcher, `/[${key}]`);\n        }\n      }\n    }\n    for (const [key, value] of entries) {\n      if (Array.isArray(value)) {\n        const matcher = turnValueToRegExp(value.join(\"/\"));\n        if (matcher.test(result)) {\n          result = result.replace(matcher, `/[...${key}]`);\n        }\n      }\n    }\n    return result;\n  } catch (e) {\n    return pathname;\n  }\n}\nfunction turnValueToRegExp(value) {\n  return new RegExp(`/${escapeRegExp(value)}(?=[/?#]|$)`);\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction getScriptSrc(props) {\n  if (props.scriptSrc) {\n    return props.scriptSrc;\n  }\n  if (isDevelopment()) {\n    return \"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js\";\n  }\n  if (props.dsn) {\n    return \"https://va.vercel-scripts.com/v1/speed-insights/script.js\";\n  }\n  if (props.basePath) {\n    return `${props.basePath}/speed-insights/script.js`;\n  }\n  return \"/_vercel/speed-insights/script.js\";\n}\n\n// src/generic.ts\nfunction injectSpeedInsights(props = {}) {\n  var _a;\n  if (!isBrowser() || props.route === null) return null;\n  initQueue();\n  const src = getScriptSrc(props);\n  if (document.head.querySelector(`script[src*=\"${src}\"]`)) return null;\n  if (props.beforeSend) {\n    (_a = window.si) == null ? void 0 : _a.call(window, \"beforeSend\", props.beforeSend);\n  }\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.defer = true;\n  script.dataset.sdkn = name + (props.framework ? `/${props.framework}` : \"\");\n  script.dataset.sdkv = version;\n  if (props.sampleRate) {\n    script.dataset.sampleRate = props.sampleRate.toString();\n  }\n  if (props.route) {\n    script.dataset.route = props.route;\n  }\n  if (props.endpoint) {\n    script.dataset.endpoint = props.endpoint;\n  } else if (props.basePath) {\n    script.dataset.endpoint = `${props.basePath}/speed-insights/vitals`;\n  }\n  if (props.dsn) {\n    script.dataset.dsn = props.dsn;\n  }\n  if (isDevelopment() && props.debug === false) {\n    script.dataset.debug = \"false\";\n  }\n  script.onerror = () => {\n    console.log(\n      `[Vercel Speed Insights] Failed to load script from ${src}. Please check if any content blockers are enabled and try again.`\n    );\n  };\n  document.head.appendChild(script);\n  return {\n    setRoute: (route) => {\n      script.dataset.route = route ?? void 0;\n    }\n  };\n}\n\n// src/react/utils.ts\nfunction getBasePath() {\n  if (typeof process === \"undefined\" || typeof process.env === \"undefined\") {\n    return void 0;\n  }\n  return process.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH;\n}\n\n// src/react/index.tsx\nfunction SpeedInsights(props) {\n  useEffect(() => {\n    var _a;\n    if (props.beforeSend) {\n      (_a = window.si) == null ? void 0 : _a.call(window, \"beforeSend\", props.beforeSend);\n    }\n  }, [props.beforeSend]);\n  const setScriptRoute = useRef(null);\n  useEffect(() => {\n    if (!setScriptRoute.current) {\n      const script = injectSpeedInsights({\n        framework: props.framework ?? \"react\",\n        basePath: props.basePath ?? getBasePath(),\n        ...props\n      });\n      if (script) {\n        setScriptRoute.current = script.setRoute;\n      }\n    } else if (props.route) {\n      setScriptRoute.current(props.route);\n    }\n  }, [props.route]);\n  return null;\n}\nexport {\n  SpeedInsights,\n  computeRoute\n};\n//# sourceMappingURL=index.mjs.map"],"mappings":"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"}